{% extends 'reviews/base.html' %}
{% load staticfiles %}

{% block title_block %}
  Welcome
{% endblock %}

{% block stylesheets_block %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/games.css' %}">
{% endblock %}

{% block body_block %}
  <!-- Set active tag -->
  <script type="text/javascript">
    document.getElementById("homeTab").classList.remove("active");
    document.getElementById("aboutTab").classList.remove("active");
    document.getElementById("gamesTab").classList.add("active");
  </script>

  <h1>{{ heading }}</h1>
  <!-- Filtering options -->
  <div class="container-fluid py-5">
    <form action="{% url 'games' %}" method="POST" id="searchCriteria">
      {% csrf_token %}
      <div class="form-row mb-5 clearfix">
        <!-- Genre -->
        <div class="col-sm-4 float-left">
          <h3>Genres:</h3>
          <fieldset>
          {% for genre in genres %}
            <li><input class="form-check-input" type="checkbox"
              id="genre-{{ genre }}" name="genre-{{ genre }}" {% if genre in genres_checked %}checked=checked{% endif%} />
            <label class="form-check-label" for="genre-{{ genre }}">
              {{ genre }}</label></li>
          {% endfor %}
          </fieldset>
        </div>

        <!-- Platform -->
        <div class="col-sm-4 float-left">
          <h3>Platforms:</h3>
          <fieldset>
          {% for platform in platforms %}
            <li><input class="form-check-input" type="checkbox"
              id="platform-{{ platform }}" name="platform-{{ platform }}" {% if platform in platforms_checked %}checked=checked{% endif %}/>
            <label class="form-check-label" for="platform-{{ platform }}">
              {{ platform }}</label></li>
          {% endfor %}
          </fieldset>
        </div>

        <!-- Order by -->
        <div class="col-sm-4 float-left">
          <h3>Order By:</h3>
          <fieldset>
            <li><input class="form-check-input" type="radio" name="order"
              id="radioNameAsc" value="name" {% if order == "name" %}checked=checked{% endif %} />
            <label class="form-check-label" for="radioNameAsc">
              Name Ascending</label></li>
            <li><input class="form-check-input" type="radio" name="order"
              id="radioNameDsc" value="-name" {% if order == "-name" %}checked=checked{% endif %} />
            <label class="form-check-label" for="radioNameDsc">
              Name Decending</label></li>
            <li><input class="form-check-input" type="radio" name="order"
              id="radioRelAsc" value="releaseDate" {% if order == "releaseDate" %}checked=checked{% endif %} />
            <label class="form-check-label" for="radioRelAsc">
              Release Date Ascending</label></li>
            <li><input class="form-check-input" type="radio" name="order"
              id="radioRelDsc" value="-releaseDate" {% if order == "-releaseDate" %}checked=checked{% endif %} />
            <label class="form-check-label" for="radioRelDsc">
              Release Date Descending</label></li>
          </fieldset>
        </div>
      </div>

      <!-- Price Slider -->
      <!--<div class="form-row">
        <h3>Price:</h3>
        <label for="rangePrice" class="float-left">£0</label>
        <label for="rangePrice" class="float-right">£100</label>
        <input type="range" id="rangePrice" class="w-100"
          min="0" max="100" value="50" />
      </div>-->

      <!-- Submit Button -->
      <div class="form-row text-center clearfix">
        <button type="submit" class="btn btn-secondary"
          form="searchCriteria">Submit</button>
      </div>
    </form>
  </div> <!-- Container -->
  <hr />

  <!-- Games list -->
  <div class="container-fluid py-5">
    <h3>Results:</h3>
    <div id="results">
      <!-- Display full list of games by default -->
      {% if games %}
        <ul>
          {% for game in games %}
            <li><a href="{% url 'game' game.slug %}">{{ game.name }}</a> {{ game.average_rating }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <strong>There are no games present.</strong>
      {% endif %}
    </div>
  </div>
{% endblock %}
